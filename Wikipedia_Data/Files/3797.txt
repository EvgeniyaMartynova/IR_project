Title: Raw image format
Aspects: {'F32'}

A camera raw image file contains minimally processed data from the image sensor of either a digital camera, a motion picture film scanner, or other image scanner.  Raw files are named so because they are not yet processed and therefore are not ready to be printed or edited with a bitmap graphics editor. Normally, the image is processed by a raw converter in a wide-gamut internal color space where precise adjustments can be made before conversion to a "positive" file format such as TIFF or JPEG for storage, printing, or further manipulation. This often encodes the image in a device-dependent color space. There are dozens, if not hundreds, of raw formats in use by different models of digital equipment (like cameras or film scanners).


== Rationale ==
Raw image files are sometimes described as "digital negatives"; though they are not negative images, they fulfill the same role as negatives in film photography: that is, the negative is not directly usable as an image, but has all of the information needed to create an image. Likewise, the process of converting a raw image file into a viewable format is sometimes called "developing" a raw image, by analogy with the film development process used to convert photographic film into viewable prints. The selection of the final choice of image rendering is part of the process of white balancing and color grading.
Like a photographic negative, a raw digital image may have a wider dynamic range or color gamut than the eventual final image format, and it preserves most of the information of the captured image. The purpose of raw image formats is to save, with minimum loss of information, data obtained from the sensor, and the conditions surrounding the capturing of the image (the metadata).
Raw image formats are intended to capture the radiometric characteristics of the scene, that is, physical information about the light intensity and color of the scene,  at the best of the camera sensor's performance. Most raw image file formats store information sensed according to the geometry of the sensor's individual photo-receptive elements (sometimes called pixels) rather than points in the expected final image: sensors with hexagonal element displacement, for example, record information for each of their hexagonally-displaced cells, which a decoding software will eventually transform into the rectangular geometry during "digital developing".


== File contents ==
Raw files contain the information required to produce a viewable image from the camera's sensor data. The structure of raw files often follows a common pattern:

A short file header which typically contains an indicator of the byte-ordering of the file, a file identifier and an offset into the main file data
Camera sensor metadata which is required to interpret the sensor image data, including the size of the sensor, the attributes of the CFA and its color profile
Image metadata which is required for inclusion in any CMS environment or database. These include the exposure settings, camera/scanner/lens model, date (and, optionally, place) of shoot/scan, authoring information and other. Some raw files contain a standardized metadata section with data in Exif format.
An image thumbnail
Most raw files contain a full size JPEG conversion of the image, which is used to preview the file on the camera's LCD panel.
In the case of motion picture film scans, either the timecode, keycode or frame number in the file sequence which represents the frame sequence in a scanned reel.  This item allows the file to be ordered in a frame sequence (without relying on its filename).
The sensor image dataMany raw file formats, including IIQ (Phase One), 3FR (Hasselblad), DCR, K25, KDC (Kodak), CRW CR2 CR3 (Canon), ERF (Epson), MEF (Mamiya), MOS (Leaf), NEF NRW (Nikon), ORF (Olympus), PEF (Pentax), RW2 (Panasonic) and ARW, SRF, SR2 (Sony), are based on the TIFF file format. These files may deviate from the TIFF standard in a number of ways, including the use of a non-standard file header, the inclusion of additional image tags and the encryption of some of the tagged data.
Panasonic's raw converter corrects geometric distortion and chromatic aberration on such cameras as the LX3, with necessary correction information presumably included in the raw. Phase One's raw converter Capture One also offers corrections for geometrical distortion, chromatic aberration, purple fringing and keystone correction emulating the shift capability of tilt-shift in software and specially designed hardware, on most raw files from over 100 different cameras.  The same holds for Canon's DPP application, at least for all more expensive cameras like all EOS DSLRs and the G series of compact cameras.
DNG, the Adobe digital negative format, is an extension of the TIFF 6.0 format and is compatible with TIFF/EP, and uses various open formats and/or standards, including Exif metadata, XMP metadata, IPTC metadata, CIE XYZ coordinates, ICC profiles, and JPEG.


=== Sensor image data ===
In digital photography, the raw file plays the role that photographic film plays in film photography. Raw files thus contain the full resolution (typically 12- or 14-bit) data as read out from each of the camera's image sensor pixels.
The camera's sensor is almost invariably overlaid with a color filter array (CFA), usually a Bayer filter, consisting of a mosaic of a 2x2 matrix of red, green, blue and (second) green filters.
One variation on the Bayer filter is the RGBE filter of the Sony Cyber-shot DSC-F828, which exchanged the green in the RG rows with "emerald"
(a blue-green
or cyan
color). Other sensors, such as the Foveon X3 sensor, capture information directly in RGB form (using three pixel sensors in each location).  These RGB raw data still need to be processed to make an image file, because the raw RGB values correspond to the responses of the sensors, not to a standard color space like sRGB.  These data do not need to be demosaiced, however.
Flatbed and film scanner sensors are typically straight narrow RGB or RGBI (where "I" stands for the additional infra-red channel for automatic dust removal) strips that are swept across an image. The HDRi raw data format is able to store the infrared raw data, which can be used for infrared cleaning, as an additional 16-bit channel. The remainder of the discussion about raw files applies to them as well. (Some scanners do not allow the host system access to the raw data at all, as a speed compromise. The raw data are processed very rapidly inside the scanner to select out the best part of the available dynamic range so only the result is passed to the computer for permanent storage, reducing the amount of data transferred and therefore the bandwidth requirement for any given speed of image throughput.)To obtain an image from a raw file, this mosaic of data must be converted into standard RGB form. This is often referred to as "raw development".
When converting from the four-sensor 2x2 Bayer-matrix raw form into RGB pixels, the green pair is used to control the luminance detail of the processed output pixel, while the red and blue, which each have half as many samples, are used mostly for the more slowly-varying chroma component of the image.
If raw format data is available, it can be used in high-dynamic-range imaging conversion, as a simpler alternative to the multi-exposure HDI approach of capturing three separate images, one underexposed, one correct and one overexposed, and "overlaying" one on top of the other.


=== Standardization ===
Providing a detailed and concise description of the content of raw files is highly problematic. There is no single raw format; formats can be similar or radically different. Different manufacturers use their own proprietary and typically undocumented formats, which are collectively known as raw format. Often they also change the format from one camera model to the next. Several major camera manufacturers, including Nikon, Canon and Sony, encrypt portions of the file in an attempt to prevent third-party tools from accessing them.This industry-wide situation of inconsistent formatting has concerned many photographers who worry that their valuable raw photos may someday become inaccessible, as computer operating systems and software programs become obsolete and abandoned raw formats are dropped from new software. The availability of high-quality open source software which decodes raw image formats, particularly dcraw, has helped to alleviate these concerns. An essay by Michael Reichmann and Juergen Specht stated "here are two solutions – the adoption by the camera industry of A: Public documentation of RAW [sic] formats; past, present and future, or, more likely B: Adoption of a universal RAW [sic] format". "Planning for [US] Library of Congress Collections" identifies raw-file formats as "less desirable file formats", and identifies DNG as a suggested alternative.DNG is the only raw image format for which industry-wide buy-in is being sought. It is based upon, and compatible with, the ISO standard raw image format ISO 12234-2, TIFF/EP, and is being used by ISO in their revision of that standard.

The ISO standard raw image format is ISO 12234-2, better known as TIFF/EP. (TIFF/EP also supports "non-raw", or "processed", images). TIFF/EP provided a basis for the raw image formats of a number of cameras. For example, Nikon's NEF raw files are based on TIFF/EP, and include a tag which identifies the version of TIFF/EP they are based on. Adobe's DNG raw file format was based on TIFF/EP, and the DNG specification states "DNG ... is compatible with the TIFF-EP standard". Several cameras use DNG as their raw image format, so in that limited sense they use TIFF/EP too.Adobe Systems launched this DNG raw image format in September 2004. By September 2006, several camera manufacturers had started to announce support for DNG in newer camera models, including Leica, Samsung, Ricoh, Pentax, Hasselblad (native camera support); and, Better Light (export). The Leica Digital-Modul-R (DMR) was first to use DNG as its native format. In September 2009 Adobe stated that there were no known intellectual property encumbrances or license requirements for DNG. (There is a "Digital Negative (DNG) Specification Patent License", but it does not actually state that there are any patents held on DNG, and the September 2009 statement was made at least 4 years after this license was published).
TIFF/EP began its 5-year revision cycle in 2006. Adobe offered the DNG specification to ISO to be part of ISO's revised TIFF/EP standard. A progress report in October 2008 from ISO about the revision of TIFF/EP stated that the revision "... currently includes two "interoperability-profiles," "IP 1" for processed image data, using ".TIF" extension, and "IP 2" for "raw" image data, ".DNG" extension". It is "IP 2" that is relevant here. A progress report in September 2009 states that "This format will be similar to DNG 1.3, which serves as the starting point for development."DNG has been used by open-source developers. Use by camera makers varies: the largest companies such as Canon, Nikon, Sony, and some others, do not use DNG.  Smaller companies and makers of "niche" cameras who might otherwise have difficulty getting support from software companies frequently use DNG as their native raw image format. Pentax uses DNG as an optional alternative to their own raw image format. There are 15 or more such companies, even including a few that specialize in movie cameras. In addition, most Canon point & shoot cameras can support DNG by using CHDK.
Canon Raw v2, CR2, is mostly based on TIFF  and lossless Jpeg ITU-T81 Canon Raw v3, CR3  is based on ISO Base Media File Format (ISO/IEC 14496-12), with custom tags, and unknown "crx" codec.


== Processing ==

To be viewed or printed, the output from a camera's image sensor has to be processed, that is, converted to a photographic rendering of the scene, and then stored in a standard raster graphics format such as JPEG. This processing, whether done in-camera or later in a raw-file converter, involves a number of operations, typically including:
decoding – image data of raw files are typically encoded for compression purpose, but also often for obfuscation purpose (e.g. raw files from Canon or Nikon cameras).
demosaicing – interpolating the partial raw data received from the color-filtered image sensor into a matrix of colored pixels.
defective pixel removal – replacing data in known bad locations with interpolations from nearby locations
white balancing – accounting for color temperature of the light that was used to take the photograph
noise reduction – trading off detail for smoothness by removing small fluctuations
color translation – converting from the camera native color space defined by the spectral sensitivities of the image sensor to an output color space (typically sRGB for JPEG)
tone reproduction – the scene luminance captured by the camera sensors and stored in the raw file (with a dynamic range of typically 10 or more bits) needs to be rendered for pleasing effect and correct viewing on low-dynamic-range monitors or prints; the tone-reproduction rendering often includes separate tone mapping and gamma compression steps.
compression – for example JPEG compressionDemosaicing is only performed for CFA sensors; it is not required for 3CCD or Foveon X3 sensors.
Cameras and image processing software may also perform additional processing to improve image quality, for example:

removal of systematic noise – bias frame subtraction and flat-field correction
dark frame subtraction
optical correction – lens distortion, vignetting, chromatic aberration and color fringing correction
contrast manipulation
increasing visual acuity by unsharp masking
dynamic range compression – lighten shadow regions without blowing out highlight regions
When a camera saves a raw file it defers most of this processing; typically the only processing performed is the removal of defective pixels (the DNG specification requires that defective pixels be removed before creating the file). Some camera manufacturers do additional processing before saving raw files; for example, Nikon has been criticized by astrophotographers for applying noise reduction before saving the raw file.Some raw formats also allow nonlinear quantization. This nonlinearity allows the compression of the raw data without visible degradation of the image by removing invisible and irrelevant information from the image. Although noise is discarded this has nothing to do with (visible) noise reduction.


=== Benefits ===
Nearly all digital cameras can process the image from the sensor into a JPEG file using settings for white balance, color saturation, contrast, and sharpness that are either selected automatically or entered by the photographer before taking the picture. Cameras that produce raw files save these settings in the file, but defer the processing. This results in an extra step for the photographer, so raw is normally only used when additional computer processing is intended. However, raw has numerous advantages over JPEG such as:

Many more shades of colors compared to JPEG files - raw files have 12 or 14 bits of intensity information per channel (4096-16384 shades), compared to JPEG's gamma-compressed 8 bits (256 shades).
Higher image quality. Because all the calculations (such as applying gamma correction, demosaicing, white balance, brightness, contrast, etc...) used to generate pixel values (in RGB format for most images) are performed in one step on the base data, the resultant pixel values will be more accurate and exhibit less posterization.
Bypassing of undesired steps in the camera's processing, including sharpening and noise reduction
JPEG images are typically saved using a lossy compression format (though a lossless JPEG compression is now available). Raw formats typically use lossless compression or high-quality lossy compression.
Finer control. Raw conversion software allows users to manipulate more parameters (such as lightness, white balance, hue, saturation, etc...) and do so with greater variability. For example, the white point can be set to any value, not just discrete preset values like "daylight" or "incandescent". Furthermore, the user can typically see a preview while adjusting these parameters.
The color space can be set to whatever is desired.
Different demosaicing algorithms can be used, not just the one coded into the camera.
The contents of raw files include more information, and potentially higher quality, than the converted results, in which the rendering parameters are fixed, the color gamut is clipped, and there may be quantization and compression artifacts.
Large transformations of the data, such as increasing the exposure of a dramatically under-exposed photo, result in fewer visible artifacts when done from raw data than when done from already rendered image files. Raw data leave more scope for both corrections and artistic manipulations, without resulting in images with visible flaws such as posterization.
All the changes made on a raw image file are non-destructive; that is, only the metadata that controls the rendering is changed to make different output versions, leaving the original data unchanged.
To some extent, raw-format photography eliminates the need to use the HDRI technique, allowing a much better control over the mapping of the scene intensity range into the output tonal range, compared to the process of automatically mapping to JPEG or other 8-bit representation.


=== Drawbacks ===
Camera raw file size is typically 2–6 times larger than JPEG file size. While use of raw formats avoids the compression artifacts inherent in JPEG, fewer images can fit on a given memory card. However, the large sizes and low prices of modern memory cards mitigate this. Burst mode shooting tends to be slower and shorter due to the larger file size.
Most raw formats implement lossless data compression to reduce the size of the files without affecting image quality. But some others use lossy data compression where quantization and filtering is performed on the image data. Sony's lossy 11+7 bit delta compression of raw data causes posterization under certain conditions. Several Nikon cameras let photographers choose between no compression, lossless compression or lossy compression for their raw images. Red Digital Cinema Camera Company introduced .r3d Redcode Raw with compression ratio from 3:1 to 18:1 which depends on resolution and frame rates.
The standard raw image format (ISO 12234-2, TIFF/EP) is not widely accepted. DNG, the potential candidate for a new standard format, has not been adopted by many major camera companies.  (See "Standardization" section). Numerous different raw formats are currently in use and new raw formats keep appearing, while others are abandoned.
Because of the lack of widespread adoption of a standard raw format, more specialized software may be required to open raw files than for standardized formats like JPEG or TIFF. Software developers have to frequently update their products to support the raw formats of the latest cameras but open source implementations like dcraw make it easier.
The time taken in the image workflow is an important factor when choosing between raw and ready-to-use image formats. With modern photo editing software the additional time needed to process raw images has been greatly reduced but it still requires an extra step in workflow in comparison with using out-of-camera JPEGs.


== Software support ==
Cameras that support raw files typically come with proprietary software for conversion of their raw image data into standard RGB images. Other processing and conversion programs and plugins are available from vendors that have either licensed the technology from the camera manufacturer or reverse-engineered the particular raw format and provided their own processing algorithms.


=== Operating system support ===


==== Apple macOS and iOS ====
In January 2005, Apple released iPhoto 5, which offered basic support for viewing and editing many raw file formats.
In April 2005, Apple's OS X 10.4 brought raw support to the operating system's ImageIO framework, enabling raw support automatically in the majority of macOS applications both from Apple (such as Preview, macOS's PDF and image viewing application, and Aperture, a photo post-production software package for professionals) as well as all third party applications which make use of the ImageIO frameworks.
Semi-regular updates to macOS generally include updated support for new raw formats introduced in the intervening months by camera manufacturers.
In 2016, Apple announced that iOS 10 would allow capturing raw images on selected hardware, and third party applications will be able to edit raw images through the operating system's Core Image framework.


==== Microsoft Windows ====


===== Windows Camera Codec Pack =====
Microsoft supplies the free Windows Camera Codec Pack for Windows XP and later versions of Microsoft Windows, to integrate raw file viewing and printing into some Microsoft Windows tools. The codecs allow native viewing of raw files from a variety of specific cameras in Windows Explorer / File Explorer and Windows Live Photo Gallery / Windows Photo Gallery, in Windows Vista and Windows 7. As of October 2016, Microsoft had not released an updated version since April 2014, which supported some specific cameras by the following manufacturers: Canon, Casio, Epson, Fujifilm, Kodak, Konica Minolta, Leica, Nikon, Olympus, Panasonic, Pentax, Samsung, and Sony.


===== Windows Imaging Component (WIC) =====

Microsoft Windows supports the Windows Imaging Component (WIC) codec standard. WIC was available as a stand-alone downloadable program for Windows XP Service Pack 2, and built into Windows XP Service Pack 3, Windows Vista, and later versions. Windows Explorer / File Explorer, and Windows Live Photo Gallery / Windows Photo Gallery can view raw formats for which the necessary WIC codecs are installed. Canon, Nikon, Sony, Olympus and Pentax have released WIC codecs for their cameras, although some manufactures only provide codec support for the 32-bit versions of Microsoft Windows.Commercial DNG WIC codecs are also available from Ardfry Imaging, and others; and FastPictureViewer Professional installs a set of WIC-enabled image decoders.


==== Android ====
Android Lollipop 5.0, introduced in late 2014, can allow smartphones to take raw images, useful in low-light situations.


=== Free and open source software ===
darktable is a raw-workflow tool for macOS, Windows, Linux and other open Unix-like operating systems. The software features native 32-bit floating-point processing and a plugin architecture.
dcraw is a program which reads most raw formats and can be made to run on operating systems not supported by most commercial software (such as Unix). LibRaw is an API library based on dcraw, offering a more convenient interface for reading and converting raw files. HDR PhotoStudio and AZImage are some of the commercial applications that use Libraw. Jrawio is another API library, written in pure Java code and compliant to the standard Java Image I/O API.
digiKam is an advanced digital photo management application for Linux, Microsoft Windows, and Mac OS X that supports raw processing.
ExifTool supports the reading, writing and editing of metadata in raw image files. ExifTool supports many different types of metadata including Exif, GPS, IPTC, XMP, JFIF, GeoTIFF, ICC Profile, Photoshop IRB, FlashPix, AFCP and ID3, as well as the maker notes of many digital cameras.
ImageMagick, a software suite for image manipulation and conversion, reads many different raw file formats. ImageMagick is available for Linux/Unix, Mac OS, Microsoft Windows, and other platforms.
LightZone is a photo editing program providing the ability to edit many raw formats natively. Most tools are raw converters, but LightZone allows a user to edit a raw file as if it were TIFF or JPEG. The project was discontinued in September 2011 and reinstated as an open source project in December 2012.
Rawstudio is a raw format developer.
RawTherapee is a raw developer supporting Linux, OS X and Microsoft Windows operating systems. It features a native 32-bit floating point pipeline.
Shotwell is an image organizer available for all major operating systems with the ability to view and edit raw images and has built-in social networking upload capability.
UFRaw is a frontend which uses dcraw as a back end. It can be used as a GIMP plugin and is available for most operating systems.


=== Proprietary software ===
In addition to those listed under operating system support, above, the commercial software described below support raw formats.


==== Dedicated raw converters ====
The following products were launched as raw processing software to process a wide range of raw files, and have this as their main purpose:

Adobe Photoshop Lightroom
Bibble Pro (now Corel AfterShot Pro)
Capture One
DxO Optics Pro (now DxO PhotoLab)
Hasselblad's Phocus relies on operating system support to process non-Hasselblad files
Photo Ninja
Silkypix Developer Studio
MagicRaw


==== Others ====
ACDSee Pro is photo management and editing software that supports the raw formats of 21 camera manufacturers.
Adobe Photoshop supports raw formats (as of version CS2).
Affinity Photo supports raw formats.
Blackmagic Design DaVinci Resolve
DNG Viewer is a free (32bit) viewer for Microsoft Windows based on dcraw. The very simple viewer is installed as RAW Image Viewer, supports some lossless operations, and can save raw images as BMP, JPEG, PNG, or TIFF.
FastRawViewer is a dedicated raw viewer that runs on Mac and Microsoft Windows, and currently claims to support all raw formats except Foveon.
Helicon Filter supports raw formats.
IrfanView is a freeware/shareware basic editor with support for raw files.
Konvertor  support for raw formats is based on dcraw.
Paint Shop Pro contains raw support, although as in the case of most editors updates to the program may be necessary to attain compatibility with newer raw formats as they are released.
PhotoLine supports raw formats.
Picasa (development discontinued) is a free editor and organizer from Google. It can read and display many raw formats, but like iPhoto, Picasa provides only limited tools for processing the data in a raw file.
SilverFast supports raw formats.
Wild Media Server (UPnP, DLNA, HTTP)  support for raw formats is based on libraw.
XnView support for raw formats is mostly based on dcraw.


==== HTML5 browser-based apps ====
A new class of raw file processing tools appeared with the development of HTML5 - rich Internet applications.

Raw.pics.io is able to render and apply basic adjustments to raw and DNG files.


== Raw filename extensions and respective camera manufacturers ==


== Raw bitmap files ==
Less commonly, raw may also refer to a generic image file format containing only pixel color values. For example, "Photoshop Raw" files (.raw) contain 8-bits-per-channel RGB data in top-to-bottom, left-to-right pixel order. Dimensions must be input manually when such files are re-opened, or a square image is assumed. Due to its simplicity, this format is very open and compatible, though limited by its lack of metadata and run-length encoding. Especially in photography and graphic design, where color management and extended gamuts are important, and large images are common.


== See also ==
List of cameras supporting a raw format


== References ==


== External links ==
Adobe: Understanding Raw Files"; background on how camera sensors treat raw files
Open RAW: a working group of photographers, software engineers and other people interested in advocating the open documentation of digital camera raw files
Atkins, Bob: "Raw, JPEG, and TIFF"; common file formats compared.
Coupe, Adam: "The benefits of shooting in RAW"; Article with diagrams explaining raw data and its advantages.
Goldstein, Jim M.: "RAW vs JPEG: Is Shooting RAW Format for Me?"; an editorial.
Basic Photography lesson in Camera Raw A pros and cons approach to the discussion of shooting in Camera Raw
Clevy, Laurent: "Inside the Canon RAW format v2: understanding the .CR2 file format"
Foi, Alessandro: "Signal-dependent noise modeling, estimation, and removal for digital imaging sensors"; with Matlab software and raw-data samples of Canon, Nikon, Fujifilm cameras.
Clevy, Laurent: "Describing the Canon Raw v3 (CR3) file format"