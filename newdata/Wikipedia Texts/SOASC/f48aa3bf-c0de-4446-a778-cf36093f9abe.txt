MOS Technology SID

The MOS Technology 6581/8580 SID (Sound Interface Device) is the built-in programmable sound generator chip of Commodore's CBM-II, Commodore 64, Commodore 128 and Commodore MAX Machine home computers. It was one of the first sound chips of its kind to be included in a home computer prior to the digital sound revolution.
Together with the VIC-II graphics chip, the SID was instrumental in making the C64 the best-selling home computer in history, and is partly credited for initiating the demoscene.


== Design process ==
The SID was devised by engineer Robert "Bob" Yannes, who later co-founded the Ensoniq digital synthesizer and sampler company. Yannes headed a team that included himself, two technicians and a CAD operator, who designed and completed the chip in five months in the latter half of 1981. Yannes was inspired by previous work in the synthesizer industry and was not impressed by the current state of computer sound chips. Instead, he wanted a high-quality instrument chip, which is the reason why the SID has features like the envelope generator, previously not found in home computer sound chips.
I thought the sound chips on the market, including those in the Atari computers, were primitive and obviously had been designed by people who knew nothing about music.

Emphasis during chip design was on high-precision frequency control, and the SID was originally designed to have 32 independent voices, sharing a common oscillator. However, these features could not be finished in time, so instead the mask work for a certain working oscillator was simply replicated three times across the chip's surface, creating three voices each with its own oscillator. Another feature that was not incorporated in the final design was a frequency look-up table for the most common musical notes, a feature that was dropped because of space limitations. The support for an audio input pin was a feature Yannes added without asking, which in theory would have allowed the chip to be used as a simple effect processor. The masks were produced in 7-micrometer technology to gain a high yield; the state of the art at the time was 6-micrometer technologies.The chip, like the first product using it (the Commodore 64), was finished in time for the Consumer Electronics Show in the first weekend of January 1982. Even though Yannes was partly displeased with the result, his colleague Charles Winterble said: "This thing is already 10 times better than anything out there and 20 times better than it needs to be."The specifications for the chip were not used as a blueprint. Rather, they were written as the development work progressed, and not all planned features made it into the final product. Yannes claims he had a feature-list of which three quarters made it into the final design. The later revision (8580) was revised to more closely match the specifications. For example, the 8580 expanded on the ability to perform a binary AND between two waveforms, something that the 6581 could only do in a somewhat odd and unintuitive manner. Another feature that differs between the two revisions is the filter, as the 6581 version is far away from the specification.


== Manufacturing, remarking, and forgery ==
Since 6581 and 8580 SID ICs are no longer produced, they have become highly sought after. In late 2007, various defective chips started appearing on eBay as supposedly "new". All of these remarked SIDs have a defective filter, but some also have defective channels/noise generators, and some are completely dead. The remarked chips are assumed to either be factory rejects from back when the chip was still produced, or possibly "reject pulls" from one of the chip pulling operations that were used to supply the chips used in the Elektron SIDStation and the HardSID cards. Fake SID chips have also been supplied to unwitting buyers from unscrupulous manufacturers in China; the supplied chips are laser-etched with completely bogus markings, and the chip inside the package is not a SID at all.


== Features ==
three separately programmable independent audio oscillators (8 octave range, approximately 16 - 4000 Hz)
four different waveforms per audio oscillator (sawtooth, triangle, pulse, noise)
one multi mode filter featuring low-pass, high-pass and band-pass outputs with 6 dB/oct (bandpass) or 12 dB/octave (lowpass/highpass) rolloff. The different filter modes are sometimes combined to produce additional timbres, for instance a notch-reject filter.
three attack/decay/sustain/release (ADSR) volume controls, one for each audio oscillator.
three ring modulators.
oscillator sync for each audio oscillator.
two 8-bit A/D converters (typically used for game control paddles, but later also used for a mouse)
external audio input (for sound mixing with external signal sources)
random number/modulation generator


== Technical details ==

The SID is a mixed-signal integrated circuit, featuring both digital and analog circuitry. All control ports are digital, while the output ports are analog. The SID features three-voice synthesis, where each voice may use one of at least five different waveforms: pulse wave (with variable duty cycle), triangle wave, sawtooth wave, pseudorandom noise (called white noise in documentation), and certain complex/combined waveforms when multiple waveforms are selected simultaneously. A voice playing Triangle waveform may be ring-modulated with one of the other voices, where the triangle waveform's bits are inverted when the modulating voice's msb is set, producing a discontinuity and change of direction with the Triangle's ramp. Oscillators may also be hard-synced to each other, where the synced oscillator is reset whenever the syncing oscillator's msb raises.
Each voice may be routed into a common, digitally controlled analog 12 dB/octave multimode filter, which is constructed with aid of external capacitors to the chip. The filter has lowpass, bandpass and highpass outputs, which can be individually selected for final output amplification via master volume register. Using a combined state of lowpass and highpass results in a notch (or inverted bandpass) output.
The programmer may vary the filter's cut-off frequency and resonance. An external audio-in port enables external audio to be passed through the filter.
The ring modulation, filter, and programming techniques such as arpeggio (rapid cycling between 2 or more frequencies to make chord-like sounds) together produce the characteristic feel of SID music.
Due to imperfect manufacturing technologies of the time and poor separation between the analog and digital parts of the chip, the 6581's output (before the amplifier stage) was always slightly biased from the zero level. Each time the volume register was altered, an audible click was produced. By quickly adjusting the amplifier's gain through the main 4-bit volume register, this bias could be modulated as PCM, resulting in a "virtual" fourth channel allowing 4-bit digital sample playback. The glitch was known and used from an early point on, first by Electronic Speech Systems to produce sampled speech in games such as Impossible Mission (1983, Epyx) and Ghostbusters (1984, Activision). The first instance of samples being used in actual musical compositions was by Martin Galway in Arkanoid (1987, Imagine), although he had copied the idea from an earlier drum synthesizer package called Digidrums. The length of sampled sound playback was limited first by memory and later technique. Kung Fu Fighting (1986), a popular early sample, has a playback length measured in seconds. c64mp3 (2010) and Cubase64 (2010) demonstrate playback lengths measured in minutes. Also, it was hugely CPU intensive - one had to output the samples very fast (in comparison to the speed of the 6510 CPU).
The better manufacturing technology in the 8580 used in the later revisions of Commodore 64C and the Commodore 128DCR caused the bias to almost entirely disappear, causing the digitized sound samples to become very quiet. Fortunately, the volume level could be mostly restored with either a hardware modification (biasing the audio-in pin), or more commonly a software trick involving using the Pulse waveform to intentionally recreate the required bias. The software trick generally renders one voice temporarily unusable, although clever musical compositions can make this problem less noticeable.  An excellent example of this quality improvement noticeably reducing a sampled channel can be found in the introduction to Electronic Arts' game Skate or Die (1987). The guitar riff played is all but missing when played on the Commodore 64c or the Commodore 128.
At the X'2008 demo party, a completely new method of playing digitized samples was unveiled. The method allows for an unprecedented four (software-mixed) channels of 8-bit samples with optional filtering on top of all samples, as well as two ordinary SID sound channels. The method works by resetting the oscillator using the waveform generator test bit, quickly ramping up the new waveform with the Triangle waveform selected, and then disabling all waveforms, resulting in the DAC continuing to output the last value---which is the desired sample. This continues for as long as two scanlines, which is ample time for glitch-free, arbitrary sample output. It is however more CPU-intensive than the 4-bit volume register DAC trick described above. Because the filtering in a SID chip is applied after the waveform generators, samples produced this way can be filtered normally.
The original manual for the SID mentions that if several waveforms are enabled at the same time, the result will be a binary AND between them. What happens in reality is that the input to the waveform DAC pins receive several waveforms at once. For instance, the Triangle waveform is made with a separate XOR circuit and a shift-to-left circuit. The top bit drives whether the XOR circuit inverts the accumulator value seen by the DAC. Thus, enabling triangle and sawtooth simultaneously causes adjacent accumulator bits in the DAC input to mix. (The XOR circuit does not come to play because it is always disabled whenever the sawtooth waveform is selected.) The pulse waveform is built by joining all the DAC bits together via a long strip of polysilicon, connected to the pulse control logic that digitally compares current accumulator value to the pulse width value. Thus, selecting the pulse waveform together with any other waveform causes every bit on the DAC to partially mix, and the loudness of the waveform is affected by the state of the pulse.
The noise generator is implemented as a 23-bit-length Fibonacci LFSR (Feedback polynomial: x^22+x^17+1). When using noise waveform simultaneously with any other waveform, the pull-down via waveform selector tends to quickly reduce the XOR shift register to 0 for all bits that are connected to the output DAC. As the zeroes shift in the register when the noise is clocked, and no 1-bits are produced to replace them, a situation can arise where the XOR shift register becomes fully zeroed. Luckily, the situation can be remedied by using the waveform control test bit, which in that condition injects one 1-bit into the XOR shift register. Some musicians are also known to use noise's combined waveforms and test bit to construct unusual sounds.
The 6581 and 8580 differ from each other in several ways. The original 6581 was manufactured using the older NMOS process, which used 12V DC to operate. The 6581 is very sensitive to static discharge and if they weren't handled properly the filters would stop working, explaining the reason of the great quantity of dead 6581s in the market. The 8580 was made using the HMOS-II process, which requires less power (9V DC), and therefore makes the IC run cooler. The 8580 is thus far more durable than the 6581. Also, due to stabler waveform generators, the bit-mixing effects are less noticeable and thus the combined waveforms come close to matching the original SID specification (which stated that they will be combined as a binary AND). The filter is also very different between the two models, with the 6581 cutoff range being a relatively straight line on a log scale, while the cutoff range on the 8580 is a straight line on a linear scale, and is close to the designers' actual specifications. Additionally, a better separation between the analog and the digital circuits made the 8580's output less noisy and distorted. The noise in 6xxx-series systems can be reduced by disconnecting the audio-in pin.
The consumer version of the 8580 was rebadged the 6582, even though the die on the chip is identical to a stock 8580 chip, including the '8580R5' mark. Dr. Evil Laboratories used it in their SID Symphony expansion cartridge (sold to Creative Micro Designs in 1991), and it was used in a few other places as well, including one PC sound-card.
Despite its documented shortcomings, many SID musicians prefer the flawed 6581 chip over the corrected 8580 chip. The main reason for this is that the filter produces strong distortion that is sometimes used to produce simulation of instruments such as a distorted electric guitar. Also, the highpass component of the filter was mixed in 3 dB attenuated compared to the other outputs, making the sound more bassy. In addition to nonlinearities in filter, the D/A circuitry used in the waveform generators produces yet more additional distortion that made its sound richer in character.


=== Revisions ===

     No instances reading "6581 R1" ever reached the market. In fact, Yannes has stated that "[the] SID chip came out pretty well the first time, it made sound. Everything we needed for the show was working after the second pass." High-resolution photos of Charles Winterble's prototype C64 show the markings "MOS 6581 2082", the last number being a date code indicating that his prototype SID chip was produced during the 20th week of 1982, which would be within 6 days of May 17, 1982.
These are the known revisions of the various SID chips: (date codes are in WWYY w=week y=year format)

6581 R1    - Prototype, only appeared on the CES machines and development prototypes, has a date code of 4981 to 0882 or so. Has the full 12 bit filter cutoff range. An unknown number were produced, probably between 50 and 100 chips. All are ceramic packages.
6581 R2    - Will say "6581" only on the package. Filter cutoff range was reduced to 11 bits and the LSB bit disconnected/forced permanently on, but is still on the die. The filter is leaky at some ranges and they tend to run hotter than other sid revisions. Made from 1982 until at least 1983. First 10 weeks or so of chips have ceramic packages (these usually appear on engineering prototypes but a few are on sold machines), the rest have plastic packages.
6581 R3    - Will say "6581" only, "6581 R3" or "6581 CBM" on the package. Had a minor change to the protection/buffering of the input pins. No changes were made to the filter section. Made from before 1983 until 1986 or so. The 6581R3 since around the week 47 of 1985 made in the Philippines use the HMOS HC-30 degree silicon though the manufacturing process remained NMOS.
6581 R4    - Will say "6581 R4" on the package. Silicon grade changed to HMOS-II "HC-30" grade, though the manufacturing process for the chip remained NMOS. Produced from 1985 until at least 1990.
6581 R4 AR - Will say "6581 R4 AR" on the package. Minor adjustment to the silicon grade, no die change from R4. Produced from around 1986 (week 22) until at least the year 1992.
6582       - Will say "6582" on the package. Typically produced around the year 1986 in Hong Kong.
6582 A     - Will say "6582A" (or "6582 A") on the package. Typically produced around the years 1989, 1990 and 1992 in the Philippines.
8580 R5    - Will say "8580R5" on the package. Produced from the years 1986 to 1993 in the Philippines, Hong Kong and in the US.Some of these chips are marked "CSG" ("Commodore Semiconductor Group") and the Commodore Logo, while others are marked with "MOS". This includes chips produced during the same week (and thus, receiving the same date code), indicating that at least two different factory lines were in operation during that week. The markings of chips varied by factory and even by line within a factory throughout most of the manufacturing run of the chip.


== Game audio ==
The majority of games produced for the Commodore 64 made use of the SID chip, with sounds ranging from simple clicks and beeps to complex musical extravaganzas or even entire digital audio tracks. Due to the technical mastery required to implement music on the chip, and its versatile features compared to other sound chips of the era, composers for the Commodore 64 have described the SID as a musical instrument in its own right. Most software did not use the full capabilities of SID, however, because the incorrect published specifications caused programmers to only use well-documented functionality. Some early software, by contrast, relied on the specifications, resulting in inaudible sound effects.Well known composers of game music for this chip are Martin Galway, known for many titles, including Wizball, and Rob Hubbard, known for titles such as ACE 2, Commando, Delta, International Karate, IK+, and Monty on the Run. Other noteworthies include Jeroen Tel (Cybernoid, Turbo Outrun, Robocop 3 and Myth), Ben Daglish (The Last Ninja, Jack the Nipper, Firelord, Gauntlet), David Dunn (Finders Keepers and Flight Path 737), David Whittaker (Speedball, BMX Simulator, Glider Rider) and Chris Hülsbeck (R-Type, Turrican and The Great Giana Sisters).


== Emulation ==
The fact that many enthusiasts prefer the real chip sound over software emulators has led to several recording projects aiming to preserve the authentic sound of the SID chip for modern hardware.
The sid.oth4 project has over 380 songs of high quality MP3 available recorded on hardsid hardware and the SOASC= project has the entire High Voltage SID Collection (HVSC) released with 49 (over 35,000 songs) recorded from real Commodore 64s in a high quality MP3 file. Both projects emphasize the importance of preserving the authentic sound of the SID chip. In 2016, the Unepic Stoned High SID Collection (USHSC) was launched. It is a YouTube channel with over 50,000 SID tunes uploaded as single videos. The USHSC is based on both the SOASC= and HVSC, but also uploads recordings of recent SID music released at the Commodore Scene Database (CSDb) site. The channel features playlists containing roughly 5000 tunes each.


== Software emulation ==
In 1989 on the Amiga computer, the demo "The 100 Most Remembered C64 Tunes" and later the PlaySID application was released, developed by Per Håkan Sundell and Ron Birk. This was one of the first attempts to emulate the SID in software only, and also introduced the file format for representing songs made on the C64 using the SID chip. This later spawned the creation of similar applications for other platforms as well as the creation of a community of people fascinated by SID music, resulting in The High Voltage SID Collection which contains over 45,000 SID tunes.A SID file contains the 6510 program code and associated data needed to replay the music on the SID. The SID files have the MIME media type audio/prs.sid.
The actual file format of a SID file has had several versions. The older standard is PSID (current version V4). The newer standard, RSID, is intended for music that requires a more complete emulation of the Commodore 64 hardware.The SID file format is not a native format used on the Commodore 64 or 128, but a format specifically created for emulator-assisted music players such as PlaySID , Sidplay and  JSidplay2. However, there are loaders like RealSIDPlay and converters such as PSID64 that make it possible to play a substantial portion of SID files on original Commodore computers.

SIDPlayer, developed by Christian Bauer and released in 1996 for the BeOS operating system, was the first SID emulator to replicate the filter section of the SID chip using a second-order Infinite impulse response filter as an approximation.
In June 1998, a cycle-based SID emulator engine called reSID became available. The all-software emulator, available with C++ source code, is licensed under the GPL by the author, Dag Lem. In 2008, Antti Lankila significantly improved the filter and distortion simulation in reSID. The improvements were included in VICE version 2.1 as well.
In 2007 the JSidplay2 project was released, a pure Java based SID player developed by Ken Händel.


== Hardware reimplementations ==
In 2008 the HyperSID project was released. HyperSID is a VSTi which acts like a MIDI controller for HyperSID hardware unit (synthesizer based on SID chip) and developed by HyperSynth company.


=== Hardware implementations using the SID chip ===
In 1989 Innovation Computer developed the Innovation Sound Standard, an IBM PC compatible sound card with a SID chip and a game port. MicroProse promised software support for the card, and Commodore BASIC programs that used SID required little conversion to run on GW-BASIC.
In 1997, an electronic musical instrument utilizing the SID chip as its synthesis engine was released. It is called the SidStation, built around the 6581 model SID chip (as opposed to the newer 8580), and it's produced by Swedish company Elektron. As the SID chip had been discontinued for years, Elektron allegedly bought up almost all of the remaining stock. In 2004, Elektron released the Monomachine pattern-based sequencer with optional keyboard.  The Monomachine contains several synthesis engines, including an emulated 6581 oscillator using a DSP.
In 1999 HardSID, another PC sound card, was released. The card uses from one to four SID chips and allows a PC to utilize the sound capabilities of the chip directly, instead of by emulation via generic sound cards (e.g. SoundBlaster).
The Catweasel from German company Individual Computers, a PCI + Zorro multiformat floppy disk controller and digital joystick adapter for PCs, Macs, and Amigas, includes a hardware SID option, i.e. an option to insert one or two real SID chips in a socket for use when playing .MUS files.
The MIDIbox SID is a MIDI-controlled synthesizer which can contain up to eight SID chips. It is a free open source project using a PIC microcontroller. Control of the synthesizer is realized with software or via a control panel with knobs, LEDs, LCD, etc., which may optionally be mounted on a keyboardless Commodore 64 body.
The Prophet64 is a cartridge for the Commodore 64. It features four separate music applications, mimicking everything from modern sequencers to the Roland 303/909 series. With an optional User Port peripheral, the Prophet64 may synchronized to other equipment using DIN Sync standard (SYNC 24). The website now states "Prophet64 has been replaced with the MSSIAH."
The MSSIAH is a cartridge for the Commodore 64 that replaces the Prophet64.
Artist/hacker Paul Slocum developed the Cynthcart cartridge that enables you to turn your C64 into an analogue synthesizer. The Cynthcart is available through atariage.com.
The Parallel Port SID Interface allows those with very slim budgets to connect the SID chip to a PC.
In May 2009 the SID chip was interfaced to the BBC Micro and BBC Master range of computers via the 1 MHz bus allowing music written for the SID chip on the Commodore 64 to be ported and played on the BBC Micro.
In October 2009 thrashbarg's project interfaced an SID chip to an ATmega8 to play MIDI files on a MOS 6581 SID.
In March 2010 STG published the SIDBlaster/USB - an open source, open hardware implementation of the SID that connects to (and is powered by) a USB port, using an FTDI chip for the USB interface and a PIC to interface the SID.
In August 2010 SuperSoniqs published the Playsoniq, a cartridge for MSX computers, with (in addition to other features) a real SID on it, ready to use on any MSX machine.
In May 2015 Gianluca Ghettini developed SidBerry, an open source, open hardware board to interface a MOS 6581 SID chip to a RaspberryPi and play standard SID music files
In 2016 Thibaut Varene published exSID, a USB audio device that can control a real 6581 and 8580 SID chip and natively playback most SID tunes.


=== SID hardware clones ===
The SwinSID is hardware emulation of the SID using an Atmel AVR processor, also featuring a real SID player based on the Atmel AVR processor.
The V-SID 1.0 project (code name SID 6581D, 'D' for digital) from David Amoros was born in 2005. This project is a hardware emulation of the SID chip from the Bob Yannes's interview, datasheets. The V-SID 1.0 engine had been implemented in a FPGA EP1C12 Cyclone from ALTERA, on an ALTIUM development board, and emulates all the characteristics of the original SID, except the filter which is a digital version (IIR filter controlled by a CPU).
The PhoenixSID 65X81 project (2006) aimed to faithfully create the SID sound using modern hardware. The workings of a SID chip were recreated on an FPGA, based on interviews with the SID's creator, original datasheets, and comparisons with real SID chips. It was distinguished from similar attempts by its use of real analog circuitry instead of emulation for the legendary SID filter. However, the project was discontinued, because George Pantazopoulos, who was the head of this project, died on April 23, 2007, at the age of 29.
The C64 Direct-to-TV emulates large portions the SID hardware, minus certain features such as (most notably) the filters. It reduces the entire C64 to a small circuit that fits into a joystick while sacrificing some compatibility.
The SIDcog is a software SID emulator running on the Parallax Propeller. All three channels can be emulated on one of the Propeller's eight COG's.
The FPGASID is a FPGA based SID replica providing high reproduction quality of the original device including all features such as the audio filters and the paddle registers. The device is a full featured stereo solution and can replace two SID chips in a single SID socket. Hardware base is an Altera MAX10 FPGA.


== See also ==
Sound chip
MOS Technology VIC – the combined graphics and sound chip of the VIC-20
Atari POKEY
MOS Technology 8364 "Paula"
Chiptune


== References ==


== Further reading ==
Collins, Karen (February 2006). ""Loops and bloops": Music of the Commodore 64 games". Soundscapes. 8.
Stephen Cass (July 15, 2019). "Chip Hall of Fame: MOS Technology 6581". IEEE Spectrum. Archived from the original on July 20, 2019.


== External links ==
SID in-depth information page
SID at Curlie
The 6581 SID Datasheet
SID programming info
MOS 8580 SID die shots